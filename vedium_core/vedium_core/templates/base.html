<!DOCTYPE html>
<!-- Built on Frappe. https://frappeframework.com/ -->
<html lang="{{boot.lang}}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="frappe">

    {# PWA Meta Tags - Vedium #}
    <meta name="theme-color" content="#166534">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vedium">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Vedium">
    <meta name="msapplication-TileColor" content="#166534">

    {# PWA Manifest #}
    <link rel="manifest" href="/assets/vedium_core/manifest.json">

    {% block meta_block %}
    {% include "templates/includes/meta_block.html" %}
    {% endblock %}

    <title>{% block title %}{{ title | striptags }}{% endblock %}</title>

    {% block favicon %}
    <link rel="shortcut icon" href="{{ (favicon or " /assets/frappe/images/frappe-favicon.svg") | abs_url }}"
        type="image/x-icon">
    {# Apple Touch Icons #}
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/vedium_core/images/apple-touch-icon.png">
    {% endblock %}

    {%- block head -%}
    {% include "templates/includes/head.html" %}
    {%- endblock -%}

    {%- block head_include %}
    {{ head_include or "" }}
    {% endblock -%}

    {%- block style %}
    {% if colocated_css -%}
    <style>
        {
                {
                colocated_css
            }
        }
    </style>
    {%- endif %}

    <style>
        /* Vedium Bottom Navigation Styles */
        @media (max-width: 768px) {
            body {
                padding-bottom: 70px !important;
            }

            @media (display-mode: standalone) {
                .frappe-control[data-fieldtype="Section Break"] {
                    margin-bottom: 80px;
                }
            }
        }

        .vedium-bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1050;
            background: rgba(26, 31, 38, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px 0;
            padding-bottom: max(8px, env(safe-area-inset-bottom));
        }

        @media (max-width: 768px) {
            .vedium-bottom-nav {
                display: flex;
                justify-content: space-around;
                align-items: center;
            }
        }

        .vedium-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            color: #8b98a5;
            text-decoration: none;
            transition: all 0.2s ease;
            border-radius: 12px;
            min-width: 64px;
        }

        .vedium-nav-item:hover,
        .vedium-nav-item:focus {
            color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
            text-decoration: none;
        }

        .vedium-nav-item.active {
            color: #22c55e;
        }

        .vedium-nav-item.active .vedium-nav-icon {
            transform: scale(1.1);
        }

        .vedium-nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
            transition: transform 0.2s ease;
        }

        .vedium-nav-label {
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        @media (display-mode: standalone) {
            .vedium-bottom-nav {
                display: flex !important;
                justify-content: space-around;
            }

            .navbar-expand {
                display: none !important;
            }
        }
    </style>
    {%- endblock -%}

    {% if boot.lang == "eo" %}
    <script type="text/javascript">
        var _jipt = [];
        _jipt.push(['project', 'frappe']);
    </script>
    <script type="text/javascript" src="https://cdn.crowdin.com/jipt/jipt.js"></script>
    {% endif %}

    <script>
        window.frappe = {};
        frappe.ready_events = [];
        frappe.ready = function (fn) {
            frappe.ready_events.push(fn);
        }
        window.dev_server = {{ dev_server }};
        window.socketio_port = {{ (frappe.socketio_port or 9000) }};
        window.show_language_picker = {{ show_language_picker or 'false' }};
    </script>
</head>

<body frappe-session-status="{{ 'logged-in' if frappe.session.user != 'Guest' else 'logged-out'}}"
    data-path="{{ path | e }}" {%- if template and template.endswith('.md') %} frappe-content-type="markdown" {%- endif
    %} class="{{ body_class or ''}}">
    {% include "public/icons/timeless/icons.svg" %}
    {% include "public/icons/espresso/icons.svg" %}
    {%- block banner -%}
    {% include "templates/includes/banner_extension.html" ignore missing %}

    {% if banner_html -%}
    {{ banner_html or "" }}
    {%- endif %}
    {%- endblock -%}

    {%- block navbar -%}
    {{ web_block(
    navbar_template or 'Standard Navbar',
    values=_context_dict,
    add_container=0,
    add_top_padding=0,
    add_bottom_padding=0,
    ) }}
    {%- endblock -%}

    {% block content %}
    {{ content }}
    {% endblock %}

    {%- block footer -%}
    {{ web_block(
    footer_template or 'Standard Footer',
    values=_context_dict,
    add_container=0,
    add_top_padding=0,
    add_bottom_padding=0
    ) }}
    {%- endblock -%}

    {# Vedium Bottom Navigation Bar (Mobile Only) #}
    <nav class="vedium-bottom-nav" id="vedium-bottom-nav" role="navigation" aria-label="Navegação principal">
        <a href="/app" class="vedium-nav-item" data-page="home">
            <svg class="vedium-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span class="vedium-nav-label">Início</span>
        </a>
        <a href="/app/selling" class="vedium-nav-item" data-page="selling">
            <svg class="vedium-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span class="vedium-nav-label">Vendas</span>
        </a>
        <a href="/app/new-doc" class="vedium-nav-item vedium-nav-action" data-page="quick">
            <div
                style="background: linear-gradient(135deg, #166534, #22c55e); border-radius: 50%; padding: 12px; margin: -16px 0;">
                <svg class="vedium-nav-icon" style="color: white; margin: 0;" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </div>
            <span class="vedium-nav-label" style="margin-top: 8px;">Novo</span>
        </a>
        <a href="/app/accounts" class="vedium-nav-item" data-page="accounts">
            <svg class="vedium-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            <span class="vedium-nav-label">Finanças</span>
        </a>
        <a href="/app/modules" class="vedium-nav-item" data-page="modules">
            <svg class="vedium-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            <span class="vedium-nav-label">Menu</span>
        </a>
    </nav>
    <script>
        (function () {
            'use strict';
            const currentPath = window.location.pathname;
            const navItems = document.querySelectorAll('.vedium-nav-item');
            navItems.forEach(item => {
                const page = item.dataset.page;
                const href = item.getAttribute('href');
                if (currentPath === href || (page === 'home' && currentPath === '/app') || currentPath.includes('/' + page)) {
                    item.classList.add('active');
                }
            });
        })();
    </script>

    {% block base_scripts %}
    <!-- js should be loaded in body! -->
    <script>
        frappe.boot = {{ boot | json }}
        // for backward compatibility of some libs
        frappe.sys_defaults = frappe.boot.sysdefaults;
    </script>
    {{ include_script('frappe-web.bundle.js') }}
    {% endblock %}

    {%- for link in web_include_js %}
    {{ include_script(link) }}
    {%- endfor -%}

    {%- block script %}
    {% if colocated_js -%}
    <script>{ { colocated_js } }</script>
    {%- endif %}
    {%- endblock %}
    <!-- csrf_token -->
    {%- block body_include %}{{ body_include or "" }}{% endblock -%}
</body>

</html>